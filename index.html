<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>AryanzUtama Store</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#f5fbff
}

.brand{
  text-align:center;
  padding:60px 15px 40px;
  background:
    linear-gradient(to bottom,rgba(255,255,255,0),rgba(255,255,255,.7),#fff),
    url("banner.png");
  background-size:cover
}

.brand img{
  max-width:220px;
  background:#fff;
  padding:10px;
  border-radius:12px
}

header{
  background:#fff;
  padding:15px;
  position:sticky;
  top:0;
  display:flex;
  gap:10px;
  align-items:center
}

header input{
  flex:1;
  padding:12px;
  border-radius:25px;
  border:1px solid #ccc
}

header button{
  border:none;
  background:#4da3ff;
  color:#fff;
  padding:12px 14px;
  border-radius:50%;
  font-size:18px;
  cursor:pointer
}

.container{
  padding:15px;
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:15px
}

.card{
  background:#fff;
  border-radius:12px;
  overflow:hidden;
  box-shadow:0 4px 10px rgba(0,0,0,.1)
}

/* FOTO 1080 x 1350 (RASIO 4:5) */
.card img{
  width:100%;
  aspect-ratio:4/5;
  object-fit:cover
}

footer{
  text-align:center;
  padding:20px;
  color:#777
}
</style>
</head>

<body>

<div class="brand">
  <img src="logo.png">
  <p>Mencari stok akun ML dengan mudah? gas cari aja</p>
</div>

<header>
  <input id="search" placeholder="Cari kategori (ahli, junior)">
  <button id="btnCari">üîç</button>
</header>

<div class="container" id="produk"></div>

<footer>PoweredByAryanzUtama</footer>

<script>
// ===== FIREBASE =====
const firebaseConfig = {
  apiKey: "ISI_DARI_FIREBASE",
  projectId: "ISI_DARI_FIREBASE"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// ===== ELEMENT =====
const container = document.getElementById("produk");
const search = document.getElementById("search");
const btnCari = document.getElementById("btnCari");

let data = [];

// ===== AMBIL DATA =====
db.collection("produk").onSnapshot(snapshot=>{
  data = [];
  snapshot.forEach(doc => data.push(doc.data()));
});

// ===== FUNGSI TAMPILKAN =====
function tampilkan(kategori){
  container.innerHTML = "";

  const hasil = data
    .filter(p =>
      !p.sold &&
      p.kategori.toLowerCase() === kategori
    )
    .sort((a,b)=>b.harga - a.harga);

  if(!hasil.length){
    container.innerHTML = `
      <p style="grid-column:1/-1;text-align:center">
        Stok kategori <b>${kategori}</b> kosong,<br>
        hubungi <b>AryanzUtama</b>
      </p>`;
    return;
  }

  hasil.forEach(p=>{
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `<img src="${p.foto}">`;
    card.onclick = () =>
      window.open(
        "https://wa.me/6289679520905?text=Saya%20tertarik%20kategori%20"+p.kategori
      );
    container.appendChild(card);
  });
}

// ===== EVENT KLIK üîç =====
btnCari.onclick = () => {
  const val = search.value.trim().toLowerCase();
  if(val !== "") tampilkan(val);
};
</script>

</body>
</html>
